
puts "pwd: #{Dir.pwd}"
## use working dir as root? or change to home dir ~/ or ~/mono - why? why not?
Mono.root = Dir.pwd

Mono.walk  ## for debugging print / walk mono (source) tree



step :clone do
  Mono.clone( 'yorobot/cache.github' )
end


step :update do
  Hubba.config.data_dir = Mono.real_path( 'yorobot/cache.github' )

  username = 'geraldb'
  h = Hubba.reposet( username )   ## note: do NOT include yorobot for now
  pp h

  Hubba.update_stats( h )
  Hubba.update_traffic( h )
  puts "Done."
end


step :push do
  msg = "auto-update week #{Date.today.cweek}"

  Mono.open( 'yorobot/cache.github' ) do |proj|
    if proj.changes?
      proj.add( "." )
      proj.commit( msg )
      proj.push
    end
  end
end